!function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i="function"==typeof Error.captureStackTrace,s=function(t){function e(e,n){t.call(this,n),this.name=e,this.message=n,i?Error.captureStackTrace(this,this.constructor):this.stack="dummy\n<no trace>"}return r(e,t),e}(Error);Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{}],2:[function(t,e,n){"use strict";function r(t,e){}function i(){}function s(t){return t}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=t("./async"),u=t("./util"),c=t("./Trace"),l=t("./BaseError"),f=function(t){function e(e,n){t.call(this,"UnhandledRejectionError","unhandled rejection: "+e),this.reason=e,this.trace=n;var r=this.reason&&"object"==typeof this.reason&&this.reason.stack;"string"!=typeof r&&(r=String(e)),this.stack="UnhandledRejectionError: "+r}return o(e,t),e}(l.default);n.UnhandledRejectionError=f;var d,h=void 0,p=!1;!function(t){t[t.Pending=0]="Pending",t[t.Fulfilled=1]="Fulfilled",t[t.Rejected=2]="Rejected"}(d||(d={})),r(void 0,void 0);var v={error:void 0},m=new c.default,_=void 0,y=0,g=function(){function t(e){var n=this;if(this._id=y++,this._state=0,this._result=void 0,this._handlers=void 0,this._trace=void 0,h&&h(this,"construct"),p&&(this._trace=new c.default(t),_&&this._setSource(_)),e!==r){if("function"!=typeof e)throw new TypeError("Promise resolver is not a function");var i=!1;try{e(function(t){i||(i=!0,n._resolve(t))},function(t){i||(i=!0,n._reject(s(t)))})}catch(t){i||(i=!0,this._reject(s(t)))}}}return t.prototype.then=function(t,e){if(h&&h(this,"then("+typeof t+", "+typeof e+")"),1===this._state&&"function"!=typeof t||2===this._state&&"function"!=typeof e)return this;var n=new(Object.getPrototypeOf(this).constructor)(r);return n._setSource(this),this._enqueue(t,e,n,void 0),n},t.prototype.done=function(t,e){if(h&&h(this,"done("+typeof t+", "+typeof e+")"),1!==this._state||"function"==typeof t){var n=m;p&&(n=new c.default,this._trace&&n.setSource(this._trace)),this._enqueue(t,e,void 0,n)}},t.prototype.catch=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(1===arguments.length){var r=arguments[0];return this.then(void 0,r)}var i=arguments[0],s=arguments[1];return this.then(void 0,function(e){var n=!1;if("function"==typeof i)n=i.prototype instanceof Error||i===Error?e instanceof i:i(e);else{if(!Array.isArray(i))throw new TypeError("invalid predicate to .catch(), got "+typeof i);for(var r=0;r<i.length;r++)if(e instanceof i[r]){n=!0;break}}return n?s(e):t.reject(e)})},t.prototype.finally=function(t){var e=this,n=function(){return t(e)};return this.then(n,n).return(this)},t.prototype.isFulfilled=function(){return 1===this._state},t.prototype.isRejected=function(){return 2===this._state},t.prototype.isPending=function(){return 0===this._state},t.prototype.value=function(){if(!this.isFulfilled())throw new Error("Promise is not fulfilled");return this._result},t.prototype.reason=function(){if(!this.isRejected())throw new Error("Promise is not rejected");return this._result},t.prototype.inspect=function(){return this.toString()},t.prototype.toString=function(){var t;switch(this._state){case 0:t="pending";break;case 1:t="fulfilled";break;case 2:t="rejected";break;default:t="unknown"}return"[Promise "+this._id+": "+t+"]"},t.prototype.delay=function(e){return this.then(function(n){return new t(function(t){setTimeout(function(){return t(n)},e)})})},t.prototype.return=function(t){return void 0===t?this.then(i):this.then(function(){return t})},t.prototype.throw=function(e){return this.then(function(){return t.reject(e)})},t.resolve=function(e){var n=new t(r);return n._resolve(e),n},t.reject=function(e){var n=new t(r);return n._reject(e),n},t.all=function(e){return new t(function(n,r){function i(e,i){var a=e instanceof t?e:t.resolve(e);a.done(function(t){s[i]=t,o--,0===o&&n(s)},function(t){return r(t)})}if(u.assert(Array.isArray(e),"thenables must be an Array"),0===e.length)return void n([]);for(var s=new Array(e.length),o=e.length,a=0;a<e.length;a++)i(e[a],a)})},t.race=function(e){return new t(function(n,r){u.assert(Array.isArray(e),"thenables must be an Array");for(var i=0;i<e.length;i++){var s=e[i],o=s instanceof t?s:t.resolve(s);t.resolve(o).done(n,r)}})},t.defer=function(){var e,n,r=new t(function(t,r){e=t,n=r});return{promise:r,reject:n,resolve:e}},t.delay=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(void 0===arguments[1]){var r=arguments[0];return new t(function(t){setTimeout(t,r)})}return t.resolve(arguments[0]).delay(arguments[1])},t.setLongTraces=function(t){p=t},t.setTracer=function(t){h="function"==typeof t?t:void 0},t.flush=function(){a.default.flush()},t.prototype._setSource=function(t){this._trace&&t._trace&&this._trace.setSource(t._trace)},t.prototype._resolve=function(e){if(u.assert(0===this._state),!e)return void this._fulfill(e);if(this===e)return void this._reject(new TypeError("cannot resolve Promise to self"));if(e instanceof t)return e._setSource(this),void(0===e._state?this._followPromise(e):1===e._state?this._fulfill(e._result):this._reject(e._result));if("object"==typeof e||"function"==typeof e){var n=this._tryGetThen(e);if(n===v)return void this._reject(s(v.error));if("function"==typeof n)return void this._followThenable(e,n)}this._fulfill(e)},t.prototype._tryGetThen=function(t){try{var e=t.then;return e}catch(t){return v.error=t,v}},t.prototype._fulfill=function(t){u.assert(0===this._state),h&&h(this,"_fulfill("+typeof t+")"),this._state=1,this._result=t,this._flush()},t.prototype._reject=function(t){var e=this;if(u.assert(0===this._state),h&&h(this,"_reject("+t+")"),this._state=2,this._result=t,this._trace&&this._result instanceof Error&&!this._result.trace){this._result.trace=this._trace;var n=this._result.stack;n&&Object.defineProperty(this._result,"stack",{enumerable:!1,get:function(){return n+"\n  from Promise at:\n"+e._trace.inspect()}})}this._flush()},t.prototype._followPromise=function(t){u.assert(0===this._state),h&&h(this,"_follow([Promise "+t._id+"])"),t._enqueue(void 0,void 0,this,void 0)},t.prototype._followThenable=function(t,e){var n=this;u.assert(0===this._state),h&&h(this,"_follow([Thenable])");var r=!1;try{e.call(t,function(t){r||(r=!0,n._resolve(t))},function(t){r||(r=!0,n._reject(s(t)))})}catch(t){r||(r=!0,this._reject(s(t)))}},t.prototype._enqueue=function(e,n,r,i){var s={promise:this,onFulfilled:e,onRejected:n,slave:r,done:i};if(0!==this._state)a.default.enqueue(t._unwrapper,s);else if(this._handlers){var o=this._handlers.length;this._handlers[o]=s}else this._handlers=[s]},t.prototype._flush=function(){if(this._handlers){var e=0,n=this._handlers,r=n.length;for(this._handlers=void 0;e<r;)a.default.enqueue(t._unwrapper,n[e++])}},t.prototype._unwrap=function(e){var n=1===this._state?e.onFulfilled:e.onRejected;if(e.done){if(h&&h(this,"_unwrap()"),"function"!=typeof n){if(2===this._state){var r=new f(this._result,e.done);throw r}return}u.assert(!_),_=this;try{var i=n(this._result);if(i){var o=i instanceof t?i:t.resolve(i);o.done()}_=void 0}catch(t){_=void 0;var r=new f(t,e.done);throw r}}else{var a=e.slave;if(h&&h(this,"_unwrap("+a._id+")"),"function"==typeof n){u.assert(!_),_=a;try{a._resolve(n(this._result))}catch(t){a._reject(s(t))}_=void 0}else 1===this._state?a._fulfill(this._result):a._reject(this._result)}},t._unwrapper=function(t){t.promise._unwrap(t)},t}();n.Promise=g,Object.defineProperty(n,"__esModule",{value:!0}),n.default=g},{"./BaseError":1,"./Trace":4,"./async":5,"./util":8}],3:[function(t,e,n){"use strict";var r="function"==typeof Error.captureStackTrace,i=function(){function t(e){void 0===e&&(e=t),r?Error.captureStackTrace(this,e):this.stack="dummy\n<no trace>"}return t.prototype.inspect=function(){var t=this.stack.split("\n");return t.shift(),t.join("\n")},t}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{}],4:[function(t,e,n){"use strict";var r=t("./Stack"),i=function(){function t(e){void 0===e&&(e=t),this.stack=new r.default(e)}return t.prototype.setSource=function(e){e.sources?(this.sources=e.sources.concat(e.stack),this.sources.length>t.traceLimit&&(this.sources=this.sources.slice(0,t.traceLimit))):this.sources=[e.stack]},t.prototype.inspect=function(){var t=this.stack.inspect();if(this.sources)for(var e=this.sources.length-1;e>=0;e--)t+="\n  from previous:\n"+this.sources[e].inspect();return t},t.traceLimit=10,t}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./Stack":3}],5:[function(t,e,n){"use strict";var r=t("./util"),i=function(){function t(){this.length=0,this._max=1e3,this._first=0}return t.prototype.push=function(t,e){return this[this.length++]=t,this[this.length++]=e,this.length<this._max},t.prototype.flush=function(){for(;this._first<this.length;){var t=this[this._first],e=this[this._first+1];this[this._first]=this[this._first+1]=void 0,this._first+=2,t(e)}this.length=0,this._first=0},t}(),s=function(){function t(){var t=this;this._pool=[],this._ring=[new i],this._current=this._ring[0],this._flusher=function(){return t._scheduledFlush()},this._flushing=!1,this._scheduled=!1,this._scheduler=void 0}return t.prototype.setScheduler=function(t){r.assert(void 0===t||null===t||"function"==typeof t),this._scheduler=t},t.prototype.enqueue=function(t,e){this._flushing||this._scheduled||this._schedule(),this._current||(this._current=this._pool.pop(),this._current||(this._current=new i),this._ring.push(this._current)),this._current.push(t,e)||(this._current=void 0)},t.prototype.flush=function(){r.assert(!this._flushing,"cannot recursively flush"),this._flushing=!0;try{for(;;){if(this._ring[0].flush(),1===this._ring.length){this._current=this._ring[0];break}r.assert(this._current!==this._ring[0]),this._pool.push(this._ring.shift())}}finally{this._flushing=!1,this._ring[0].length>0&&!this._scheduled&&this._schedule()}},t.prototype._schedule=function(){r.assert(!this._scheduled);var t=this._scheduler;t||(t="function"==typeof setImmediate?setImmediate:setTimeout),t(this._flusher),this._scheduled=!0},t.prototype._scheduledFlush=function(){this._scheduled=!1,this.flush()},t}();n.Async=s,n.async=new s,Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.async},{"./util":8}],6:[function(t,e,n){"use strict";var r=t("./Promise");n.default=r.default,n.Promise=r.Promise,n.UnhandledRejectionError=r.UnhandledRejectionError;var i=t("./polyfill");n.polyfill=i.default;var s=t("./BaseError");n.BaseError=s.default},{"./BaseError":1,"./Promise":2,"./polyfill":7}],7:[function(t,e,n){"use strict";function r(t){void 0===t&&(t=!1);var e=s.getGlobal();return!!e&&(t||"function"!=typeof e.Promise?(e.Promise=i.Promise,!0):e.Promise instanceof i.Promise)}var i=t("./Promise"),s=t("./util");Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./Promise":2,"./util":8}],8:[function(t,e,n){(function(t){"use strict";function e(t,e){if(!t)throw new Error(e?"assertion failed: "+e:"assertion failed")}function r(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof t)return t;var e;try{e=new Function("return this")()}catch(t){}return e}n.assert=e,n.getGlobal=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){"use strict";function r(t,e){return new o.default(function(n,r){var i=a.default.createPayloadToWatson(t,e),o=new XMLHttpRequest;o.open("POST",u,!0),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status&&o.responseText?(c.setResponsePayload(JSON.parse(o.responseText)),n(s)):r({name:""+o.status,message:o.responseText}))};var l=JSON.stringify(i);0!==Object.getOwnPropertyNames(i).length&&c.setRequestPayload(i),o.send(l)})}Object.defineProperty(n,"__esModule",{value:!0});var i,s,o=t("ts-promise"),a=t("./conversation-state"),u="/api/message",c={sendRequest:r,getRequestPayload:function(){return i},getResponsePayload:function(){return s},setRequestPayload:function(t){i=t},setResponsePayload:function(t){s=t},setEndpoint:function(t,e){void 0===e&&(e=""),u=""+t+u+e}};n.default=c},{"./conversation-state":12,"ts-promise":6}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={responseDelay:2};n.default=r},{}],11:[function(t,e,n){"use strict";function r(t,e,n,r){c||(c=!0,s=setInterval(function(){++f,f===a&&(u+=u,i(!1)),l||t(e,n,r).then(function(){return l=!1}),l=!0},u))}function i(t){void 0===t&&(t=!0),c&&(clearInterval(s),c=!1,f=0,t&&(u=o))}Object.defineProperty(n,"__esModule",{value:!0});var s,o=5e3,a=5,u=o,c=!1,l=!1,f=0,d={start:r,clearPing:i};n.default=d},{}],12:[function(t,e,n){"use strict";function r(){return P.default.getItem(x)||{context:{},output:{}}}function i(t){P.default.setItem(x,t)}function s(){P.default.removeItem(x)}function o(){var t=r().context;return t}function a(t){var e=r();e.context=w({},e.context,t),i(e)}function u(t){P.default.setItem(E,t)}function c(){return P.default.getItem(E)}function l(t,e){if(t){var n=o();n[t]=e,a(n)}}function f(t){return o()[t]}function d(){return P.default.getItem(j)}function h(t){P.default.setItem(j,t)}function p(){P.default.removeItem(j)}function v(t,e){var n={};return t&&(n.input={text:t}),e&&(n.context=e),n}function m(){p(),s()}function _(){P.default.setItem(O,location.href)}function y(){return P.default.getItem(O)}function g(){return y()===location.href}function b(){return y()&&g()?"page_refresh":"page_load"}var w=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(n,"__esModule",{value:!0});var P=t("./utils/session-storage.util"),j="nssfConversation",x="nssfPayload",E="nssfDefaultContext",O="nssfPageURL",S={getPayload:r,savePayload:i,resetPayload:s,createPayloadToWatson:v,getContext:o,saveContext:a,getDefaultContext:c,saveDefaultContext:u,updateContextVariable:l,getContextVariable:f,getConversationHtml:d,saveConversationHtml:h,resetConversationHtml:p,resetConversationState:m,saveCurrentURL:_,getPageState:b};n.default=S},{"./utils/session-storage.util":23}],13:[function(t,e,n){"use strict";function r(t){$.default.lang=t.lang,a(),o(t),i()}function i(){var t=document.querySelectorAll("#chatbot-menu-link, #chat-notification");B.default.listForEach(t,function(t){t.addEventListener("click",s)})}function s(){document.querySelector(".dropdown-single.chat-menu.active")&&c()}function o(t){Z=t.onInitError||Z,Q=t.onInitSuccess||Q,F=t.responseDelay||K.default.responseDelay,h(t.endpoint),d(t.container),f(t),M(t.animation)}function a(){var t={chat_title:$.default.translate("chat_title"),help_title:$.default.translate("help_title"),input_placeholder:$.default.translate("input_placeholder"),connection_error:$.default.translate("error.connection"),error_title:$.default.translate("error.error_title")};Y=X.default.replace(Y,t)}function u(){z.default.resetConversationState();var t=_();t.innerHTML="",c()}function c(){if(!z.default.getContextVariable("conversation_id")){var t=z.default.getDefaultContext();l("",t)}}function l(t,e,n){return void 0===n&&(n=!0),n&&A(!0),H.default.sendRequest(t,e).then(function(t){return R(!1),t}).then(function(t){return g(t)}).then(q).then(function(){return V.default.clearPing()}).catch(function(n){V.default.start(l,t,e,!1),L(n)})}function f(t){if(z.default.getContextVariable("conversation_id")){var e=_();e.innerHTML=z.default.getConversationHtml(),t.context&&z.default.saveContext(t.context)}else z.default.saveDefaultContext(t.context);z.default.saveCurrentURL()}function d(t){if(t){if(D=document.querySelector(t),!D)throw new Error("Missing container for the chat")}else D=document.createElement("div"),D.setAttribute("id","nssf-virtual-assistant"),document.body.appendChild(D);D.setAttribute("style","display:none"),D.classList.add("nssf-virtual-assistant","hide"),D.innerHTML=Y}function h(t){void 0===t&&(t="");var e=B.default.buildDomElement({tagName:"link",attributes:{rel:"stylesheet",href:""+t+et.style}});e.addEventListener("load",p,!1),e.addEventListener("error",p,!1),document.head.appendChild(e)}function p(){D.removeAttribute("style")}function v(t,e){var n=b(e);if(null!==n&&t){var r=D.querySelector(et.selectors.textInput),i=w(t,n),s=_();m(s,(n?et.selectors.fromUser:et.selectors.fromWatson)+et.selectors.latest),n&&r.focus(),A(!1),s.appendChild(i),z.default.saveConversationHtml(s.innerHTML),S()}}function m(t,e){var n=t.querySelectorAll(e);n&&B.default.listForEach(n,function(t){t.classList.remove("latest")})}function _(){return D.querySelector(et.selectors.chatBox)}function y(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),e&&v(t,et.authorTypes.user),n&&A(!0),t){var r=z.default.getContext();return H.default.sendRequest(t,r).then(function(t){return R(!1),t}).delay(1e3*O()).then(function(t){return g(t)}).then(function(t){return V.default.clearPing(),t}).catch(function(e){console.error(e),R(!0),V.default.start(y,t,!1,!1)})}return U.default.resolve()}function g(t){var e=U.default.defer(),n=(t||{output:{}}).output;if(J.default.processEmptyText(n),z.default.savePayload(t),J.default.hasOutputText(n)){var r=J.default.processOutputText(n),i=r.length;r.forEach(function(t,n,r){e.promise=e.promise.delay(0===n?0:1e3*O()).then(function(){return v(t,et.authorTypes.watson)}).finally(function(){--i,i>0&&A(!0)})})}return e.promise=e.promise.then(function(){return t}).finally(function(){A(!1),S()}),e.resolve(),e.promise}function b(t){return t===et.authorTypes.user||t!==et.authorTypes.watson&&null}function w(t,e){var n=document.createDocumentFragment(),r=[].concat(t).filter(function(t){return!!t});return r.forEach(function(t,i){var s=[];if(i===r.length-1){var o=j();s.push(o)}if(!n.hasChildNodes()&&!e){var a=x();s.push(a)}var u=[{tagName:"div",classNames:["base",E(r,i)],text:t,childrens:s}];e&&u.push({tagName:"span",classNames:["you"],text:"You",childrens:[]});var c={tagName:"div",classNames:["segments","load"],childrens:[{tagName:"div",classNames:[e?"from-user":"from-watson","latest",n.hasChildNodes()?"sub":"msg-top"],childrens:[{tagName:"div",classNames:["message-inner"],childrens:u}]}]};n.appendChild(B.default.buildDomElement(c))}),n}function P(){var t=document.createDocumentFragment(),e={tagName:"div",classNames:["segments","load","chat-processing","animated","fadeIn"],childrens:[{tagName:"div",classNames:["from-watson","latest","msg-top"],childrens:[{tagName:"div",classNames:["message-inner"],childrens:[{tagName:"div",classNames:["base","typing"],childrens:[{tagName:"div",classNames:["chat-processing-spinner"],childrens:[{tagName:"div",classNames:["bounce1"]},{tagName:"div",classNames:["bounce2"]},{tagName:"div",classNames:["bounce3"]}]},x()]}]}]}]};return t.appendChild(B.default.buildDomElement(e)),t}function j(){return{tagName:"span",classNames:["time"],text:(new Date).toLocaleTimeString().replace(/:\d+ /," ")}}function x(){return{tagName:"span",classNames:["icon","icon-nssf1"]}}function E(t,e){return 1===t.length?"message":0===e&&t.length?"first-text":e===t.length-1?"last-text":"intermediate"}function O(){return F>0?Math.random()*F+1.5:1.5}function S(){var t=_(),e=t.querySelector(et.selectors.fromWatson+et.selectors.latest);e&&(t.scrollTop=e.offsetTop)}function C(t,e){13===t.keyCode&&e.value&&N(e)}function T(){N(D.querySelector(et.selectors.textInput))}function N(t){t.value&&(y(t.value),t.value="",B.default.fireEvent(t,"input"))}function M(t){void 0===t&&(t={duration:2,firstAnimation:10,number:3,interval:2});var e=k();G.default.inactiveAnimationCounter=t.number,window.addEventListener("load",function(){G.default.chatInactiveAnimation(e,t,t.firstAnimation),S()},!1)}function A(t){var e=_();t?(e.appendChild(P()),S()):B.default.removeElement(I())}function I(){return D.querySelector(et.selectors.chatProcessing)}function k(){return D.querySelector(et.selectors.minimized)}function L(t){tt=!1,Z(t),console.error(t),R(!0)}function q(){tt||(Q(),tt=!0),console.debug("Conversation initialized successfully.")}function R(t){D.querySelector(et.selectors.textInput).disabled=t,D.querySelector(et.selectors.sendMessageButton).disabled=t,t?D.classList.add("connection-error"):D.classList.remove("connection-error")}Object.defineProperty(n,"__esModule",{value:!0});var D,F,U=t("ts-promise"),H=t("./api"),B=t("./dom-helper"),z=t("./conversation-state"),V=t("./conversation-ping"),W=t("./template"),G=t("./utils/animation.util"),J=t("./utils/output.util"),K=t("./config/constants"),$=t("./utils/i18n.util"),X=t("./utils/string.util"),Y=W.default,Q=function(t){return t},Z=function(t){return t},tt=!1,et={selectors:{chatBox:"#scrollingChat",textInput:"#textInput",sendMessageButton:".sendMessageButton",fromUser:".from-user",fromWatson:".from-watson",latest:".latest",minimized:"#minimized-state",elementsContainer:".elementsContainer",chatProcessing:".chat-processing"},authorTypes:{user:"user",watson:"watson"},style:"/css/app.css"},nt={init:r,inputKeyDown:C,onSendMessage:T,sendMessage:y,resetChatSession:u};n.default=nt},{"./api":9,"./config/constants":10,"./conversation-ping":11,"./conversation-state":12,"./dom-helper":14,"./template":18,"./utils/animation.util":19,"./utils/i18n.util":20,"./utils/output.util":22,"./utils/string.util":24,"ts-promise":6}],14:[function(t,e,n){"use strict";function r(t){var e=document.createElement(t.tagName);return t.text?e.innerHTML=t.text:t.html&&e.insertAdjacentHTML("beforeend",t.html),t.id&&(e.id=t.id),Array.isArray(t.classNames)&&t.classNames.forEach(function(t){return e.classList.add(t)}),t.attributes&&Object.keys(t.attributes).forEach(function(n){e.setAttribute(n,t.attributes[n])}),Array.isArray(t.childrens)&&t.childrens.forEach(function(t){return e.appendChild(r(t))}),e}function i(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!0),!t.dispatchEvent(n)}function o(t,e,n){for(var r=0,i=t;r<i.length;r++){var s=i[r];e.call(n,s)}}function a(t,e){void 0===e&&(e="");var n=location.search.match(new RegExp("[?&]"+t+"=(.+?)(&|$)"));return n&&n[1]||e}Object.defineProperty(n,"__esModule",{value:!0});var u={buildDomElement:r,removeElement:i,fireEvent:s,listForEach:o,getURLParam:a};n.default=u},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./api"),i=t("./conversation"),s=function(t){void 0===t&&(t={}),t.endpoint=(t.endpoint||"//"+location.host).replace(/\/$/,""),t.lang=t.lang||navigator.language,t.context=t.context||{},r.default.setEndpoint(t.endpoint),i.default.init(t)},o=i.default.inputKeyDown,a=i.default.onSendMessage,u=i.default.sendMessage;n.default={init:s,inputKeyDown:o,onSendMessage:a,sendMessage:u,Api:r.default}},{"./api":9,"./conversation":13}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={chat_title:"Chat",help_title:"How can I help?",input_placeholder:"Ask a question",error:{connection:"Sorry, I'm facing some connectivity issues. <br>I need to take a quick break.",error_title:"Oops."},empty_text:"I'm sorry. I don't understand your question.",please_choice:"Please choice:"};n.default=r},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global");window.NSSFAssistant=r.default},{"./global":15}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default='\n<div class="chat-header">\n    <span class="chat-title">\n        <span class="chat-title-desc"></span>\n        <span class="virtual-assistant-name">{chat_title}</span>\n    </span>\n    <span class="chat-header-controls">\n        <span class="control">-</span>\n    </span>\n</div>\n<div class="chat-content">\n    <div id="chat-error">\n        <p class="chat-error-title">{error_title}</p>\n        <p class="chat-error-description">{connection_error}</p>\n    </div>\n    <div id="scrollingChat"></div>\n</div>\n<label for="textInput" class="inputOutline">\n    <input id="textInput" class="input responsive-column"\n           placeholder="{input_placeholder}" type="text"\n           onkeydown="NSSFAssistant.inputKeyDown(event, this)">\n    <button id="chatbot-send-btn" class="sendMessageButton" type="button" onclick="NSSFAssistant.onSendMessage()">\n        <span class="icon-right-arrow"></span>\n    </button>\n</label>\n<div class="chat-footer">\n  <p class="w-for">powered by <strong>IBM</strong> Watson <span class="icon-watson"></span></p>\n</div>\n'},{}],19:[function(t,e,n){"use strict";function r(t){var e=this;return new u.default(function(n){s(t,"zoomOut"),t.addEventListener("animationend",i.bind(e,n,t))})}function i(t,e){e.removeEventListener("animationend",i),t(e)}function s(t,e,n){var r=this;return void 0===n&&(n=.5),new u.default(function(s){t.classList.add("animated"),t.classList.add(e),t.style["animation-duration"]=n+"s",t.addEventListener("animationend",i.bind(r,s,t))})}function o(t,e){t.classList.remove("animated"),t.classList.remove(e),t.removeAttribute("style")}function a(t,e,n){setTimeout(function(){c.animate(t,"shake",e.duration).then(function(){t.classList.remove("shake"),c.inactiveAnimationCounter>0&&a(t,e,e.interval)}),--c.inactiveAnimationCounter},1e3*n)}Object.defineProperty(n,"__esModule",{value:!0});var u=t("ts-promise"),c={animateUiElements:r,animate:s,chatInactiveAnimation:a,inactiveAnimationCounter:0,cancelAnimation:o};n.default=c},{"ts-promise":6}],20:[function(t,e,n){"use strict";function r(t){return i.default.getValue(t,o[a.lang])||i.default.getValue(t,o.en)||t}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./object-parser.util"),s=t("../locales/en"),o={en:s.default},a={lang:navigator.language,translate:r};n.default=a},{"../locales/en":16,"./object-parser.util":21}],21:[function(t,e,n){"use strict";function r(t,e){return i(t?t.split("."):[],!1,e)}function i(t,e,n){try{for(var r=0,i=t;r<i.length;r++){var s=i[r];if(!Object.prototype.hasOwnProperty.call(n,s)){if(!e)return;n[s]={}}n=n[s]}return n}catch(t){}}Object.defineProperty(n,"__esModule",{value:!0});var s={getValue:r};n.default=s},{}],22:[function(t,e,n){"use strict";function r(t){return t&&t.ui_element&&t.ui_element.length>0}function i(t){return v.default.getValue("action.function",t)}function s(t){return t&&t.output_action}function o(t){if(!t.text)return!1;var e=[].concat(t.text);if(1===e.length){var n=e[0];return n&&"<br/>"!==n.replace(/\s/g,"").toLowerCase()}return e.length>0}function a(t){var e;return r(t)&&(e=t.ui_element[0]),e}function u(t){var e,n=a(t);if(n){var r=n.type,i=n.select_type;e="button"===r&&"multi"===i?"checkbox":r}return e}function c(t,e){var n=[],r=[].concat(e);return Array.isArray(t.elements)&&(n=t.elements.filter(function(t){var e=t.value,n=t.action;return r.indexOf(e)>-1&&n})),n}function l(t,e){var n=[].concat(t.text),r=[].concat(e.text);return n.length===r.length&&n.every(function(t,e){return r[e]===t})}function f(t){var e=[],n=[];return[].concat(t.text).forEach(function(t){t=p.default.camelize(t);var r=t.split(m).filter(function(t){return!!t});1===r.length?n=n.concat(r):(n.push(r.shift()),e.push(n),n=[r.pop()],r.forEach(function(t){return e.push([t])}))}),e.push(n),e}function d(t){t.translateText&&(t.text[0]=h.default.translate(t.translateText))}Object.defineProperty(n,"__esModule",{value:!0});var h=t("../utils/i18n.util"),p=t("../utils/string.util"),v=t("../utils/object-parser.util"),m="<pause>",_={hasUiElements:r,getOutputFunction:i,hasOutputAction:s,hasOutputText:o,getUiElementConfig:a,getUiElementType:u,findUiActionElements:c,compareNewAndPreviousOutputs:l,processOutputText:f,processEmptyText:d};n.default=_},{"../utils/i18n.util":20,"../utils/object-parser.util":21,"../utils/string.util":24}],23:[function(t,e,n){"use strict";function r(t,e){sessionStorage.setItem(t,JSON.stringify(e))}function i(t){return JSON.parse(sessionStorage.getItem(t))}function s(t){sessionStorage.removeItem(t)}function o(t){return sessionStorage.hasOwnProperty(t)}Object.defineProperty(n,"__esModule",{value:!0});var a={setItem:r,getItem:i,removeItem:s,hasProperty:o};n.default=a},{}],24:[function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=/\\?\{([^{}]+)\}/g),String(t).replace(n,function(t,n){return null!=e[n]?e[n]:t})}function i(t){return t.replace(/camelize\(([^\)]*)\)/g,function(t,e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})}Object.defineProperty(n,"__esModule",{value:!0});var s={replace:r,camelize:i};n.default=s},{}]},{},[17]);